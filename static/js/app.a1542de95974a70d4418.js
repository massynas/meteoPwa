webpackJsonp([1],{"7zck":function(t,e){},"9njv":function(t,e,a){"use strict";var n={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-list",[e("v-list-tile",[e("v-list-tile-action",[e("v-icon",[this._v("folder")])],1),this._v(" "),e("v-list-tile-content",[e("v-list-tile-title",[e("a",{attrs:{href:"massynas",target:"_blank"}},[this._v("GITHUB REPO")])])],1)],1)],1)},staticRenderFns:[]};e.a=n},AHgr:function(t,e){},NHnr:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=a("7+uW"),o=a("Dd8w"),i=a.n(o),r=a("NYxO"),s=a("RfEp"),c=a("mtWM"),l=a.n(c);n.a.use(r.a);var u=new r.a.Store({state:{location:{city:"",country:""},previsions:[],weather:{},flickrImg:{},loading:!0,error:null},getters:{weather:function(t){return t.weather},previsions:function(t){return t.previsions},previsionsByDays:function(t){var e=[];return t.previsions.forEach(function(a,n){var o=new Date(a.dt_txt).getDate();if(void 0!=t.previsions[n-1]){var i=new Date(t.previsions[n-1].dt_txt).getDate();void 0!=i&&o!=i&&e.push(a)}}),e},location:function(t){return t.location},flickr:function(t){return t.flickrImg},loading:function(t){return t.loading},error:function(t){return t.error}},mutations:{SET_WEATHER:function(t,e){t.previsions=e,t.weather=e[0]},SET_LOCATION:function(t,e){t.location=e},SET_LOCATION_PIX:function(t,e){t.flickrImg=e},SET_LOADING:function(t,e){t.loading=e},SET_ERROR:function(t,e){t.error=e}},actions:{setLoading:function(t,e){t.commit("SET_LOADING",e)},loadWeather:function(t,e){t.commit("SET_LOADING",!0);var a="";a=void 0!=e.lat&&void 0!=e.long?"lat="+e.lat+"&lon="+e.long:"q="+e,l.a.get("https://api.openweathermap.org/data/2.5/forecast?"+a+"&APPID=a9d7a05fe78144cb7f7113e1416e7886&units=metric").then(function(e){console.log("success Weather API",e.data),t.commit("SET_LOCATION",e.data.city),t.commit("SET_WEATHER",e.data.list),t.commit("SET_LOADING",!1),t.commit("SET_ERROR",null),l.a.get("https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=385faf93e749d1b36c63a91d1245a3f2&media=photos&content_type=1&privacy_filter=1&tags=landscape&radius=32&lat="+e.data.city.coord.lat+"&lon="+e.data.city.coord.lon+"&per_page=1&page=1&accuracy=11&content_type=1&sort=relevance&format=json&nojsoncallback=1").then(function(e){console.log("success Flickr API",e.data),t.commit("SET_LOCATION_PIX",e.data.photos.photo[0])}).catch(function(t){console.log("error",t)})}).catch(function(e){console.log(e),t.commit("SET_LOADING",!1),t.commit("SET_ERROR",404)})}}}),d={name:"App",store:u,data:function(){return{drawer:!1,date:new Date,dialog:!1,geohash:{},manualSearch:"",geoLocation:!1}},components:{navigation:s.default},mounted:function(){this.initLocation()},methods:{manualSearchLocation:function(){this.$store.dispatch("loadWeather",this.manualSearch),this.dialog=!1,this.manualSearch="","error"==this.$route.name&&this.$router.push("/")},initLocation:function(){var t=this;navigator.geolocation?(this.geoLocation=!0,navigator.geolocation.getCurrentPosition(function(e){t.geohash={lat:e.coords.latitude,long:e.coords.longitude,precision:t.precision},"error"==t.$route.name&&t.$router.push("/"),t.$store.dispatch("setLoading",!0),t.$store.dispatch("loadWeather",t.geohash)},function(e){console.log("GEOLOCATION ERR",e),t.$store.dispatch("setLoading",!1),t.$router.push("/error/no-geo")})):(console.error("Cannot access geolocation"),this.$store.dispatch("setLoading",!1),this.$router.push("/error/no-geo"))}},computed:i()({},Object(r.b)(["loading","location","error"]),{year:function(){return this.date.getFullYear()},period:function(){var t=this.date.getHours();return t>5&&t<18?"app--day":"app--night"}}),watch:{error:function(t,e){404==t&&this.$router.push("/error/no-data")}}},v={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",{class:t.period,attrs:{id:"app"}},[a("v-navigation-drawer",{attrs:{fixed:"",app:""},model:{value:t.drawer,callback:function(e){t.drawer=e},expression:"drawer"}},[a("navigation")],1),t._v(" "),a("v-toolbar",{attrs:{app:"",flat:"",dark:"",absolute:"",color:"transparent"}},[a("v-toolbar-side-icon",{on:{click:function(e){e.stopPropagation(),t.drawer=!t.drawer}}}),t._v(" "),a("v-toolbar-title",[t.location?a("h1",[t._v(t._s(t.location.name)+", "+t._s(t.location.country))]):t._e()]),t._v(" "),a("v-spacer"),t._v(" "),a("v-btn",{attrs:{icon:""},nativeOn:{click:function(e){e.stopPropagation(),t.dialog=!0}}},[a("v-icon",[t._v("search")])],1),t._v(" "),a("v-btn",{attrs:{icon:""},nativeOn:{click:function(e){e.stopPropagation(),t.initLocation()}}},[a("v-icon",[t._v("my_location")])],1)],1),t._v(" "),a("v-content",[t.loading?a("v-progress-circular",{attrs:{size:70,width:7,indeterminate:""}}):a("router-view")],1),t._v(" "),a("v-dialog",{attrs:{"max-width":"290"},model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title",{staticClass:"headline"},[t._v("Choose your location...")]),t._v(" "),a("v-card-text",[a("v-text-field",{attrs:{id:"testing",label:"Location"},on:{keyup:function(e){if(!("button"in e)&&t._k(e.keyCode,"enter",13,e.key,"Enter"))return null;t.manualSearchLocation()}},model:{value:t.manualSearch,callback:function(e){t.manualSearch=e},expression:"manualSearch"}})],1),t._v(" "),a("v-card-actions",[a("v-spacer"),t._v(" "),a("v-btn",{attrs:{flat:"flat"},nativeOn:{click:function(e){t.dialog=!1}}},[t._v("Cancel")]),t._v(" "),a("v-btn",{attrs:{flat:"flat"},nativeOn:{click:function(e){t.manualSearchLocation()}}},[t._v("Search")])],1)],1)],1)],1)},staticRenderFns:[]};var p=a("VU/8")(d,v,!1,function(t){a("AHgr")},null,null).exports,h=a("/ocq"),f={KelvToCelcius:{bind:function(t,e,a){t.innerHTML=Math.round(e.value-273.15)+"°C"}},round:{bind:function(t,e,a){t.innerHTML=Math.round(e.value)},update:function(t,e,a){t.innerHTML=Math.round(e.value)}},lazyimg:{bind:function(t,e){},update:function(t,e){!function(t,e){var a=new Image;a.onload=function(){t.style.backgroundImage="url("+e+")"},a.src=e}(t,e.value)},unbind:function(t){}},getDayFromDate:{bind:function(t,e,a){var n="";switch(new Date(e.value).getDay()){case 0:n="Sunday";break;case 1:n="Monday";break;case 2:n="Tuesday";break;case 3:n="Wednesday";break;case 4:n="Thursday";break;case 5:n="Friday";break;case 6:n="Saturday"}t.innerHTML=n}}},m={name:"Previsions",props:["data"],directives:f,data:function(){return{}}},_={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"previsions"},[a("ul",t._l(t.data,function(e){return a("li",[a("v-layout",[a("v-flex",{staticClass:"label",attrs:{xs9:""}},[a("i",{class:"icon wi wi-owm-"+e.weather[0].id}),t._v(" "),a("span",{directives:[{name:"getDayFromDate",rawName:"v-getDayFromDate",value:e.dt_txt,expression:"p.dt_txt"}]})]),t._v(" "),a("v-flex",{staticClass:"temp",attrs:{xs3:""}},[a("span",{directives:[{name:"round",rawName:"v-round",value:e.main.temp,expression:"p.main.temp"}]}),t._v("°\n          ")])],1)],1)}))])},staticRenderFns:[]};var g={name:"HelloWorld",store:u,directives:f,components:{Previsions:a("VU/8")(m,_,!1,function(t){a("vyp2")},null,null).exports},data:function(){return{typeOfView:"list"}},methods:{getFlickImg:function(){return"https://farm"+this.flickr.farm+".staticflickr.com/"+this.flickr.server+"/"+this.flickr.id+"_"+this.flickr.secret+".jpg"}},computed:i()({},Object(r.b)(["weather","location","flickr","previsions","previsionsByDays"]))},w={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"hello"},[t.weather.main?a("header",{directives:[{name:"lazyimg",rawName:"v-lazyimg",value:t.getFlickImg(),expression:"getFlickImg()"}],staticClass:"currentWeather"},[a("v-layout",{staticClass:"hero"},[a("v-flex",{attrs:{xs8:""}},[a("div",{staticClass:"hero--temp"},[a("span",{directives:[{name:"round",rawName:"v-round",value:t.weather.main.temp,expression:"weather.main.temp"}]}),t._v("°\n        ")]),t._v(" "),a("div",{staticClass:"hero--description"},[a("p",["d"==t.weather.sys.pod?a("i",{class:"wi wi-owm-day-"+t.weather.weather[0].id}):t._e(),t._v(" "),"n"==t.weather.sys.pod?a("i",{class:"wi wi-owm-night-"+t.weather.weather[0].id}):t._e(),t._v("\n            "+t._s(t.weather.weather[0].description)+"\n          ")]),t._v(" "),a("p",[a("i",{staticClass:"wi wi-strong-wind"}),t._v(" "+t._s(t.weather.wind.speed)+" m/s")]),t._v(" "),a("p",[a("i",{staticClass:"wi wi-humidity"}),a("span",[t._v(" "+t._s(t.weather.main.humidity)+"%")])])])]),t._v(" "),a("v-flex",{attrs:{xs4:""}})],1)],1):t._e(),t._v(" "),a("section",{staticClass:"weatherSum"},["list"==t.typeOfView?a("Previsions",{attrs:{data:t.previsionsByDays}}):t._e()],1)])},staticRenderFns:[]};var y=a("VU/8")(g,w,!1,function(t){a("rAV4")},null,null).exports,k={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("section",{staticClass:"errorPage"},[a("header",{staticClass:"header"},["no-geo"===t.errorType?a("h1",[a("v-icon",[t._v("location_off")]),t._v(" "),a("span",[t._v("NO GPS DATA...")])],1):t._e(),t._v(" "),"no-data"===t.errorType?a("h1",[a("v-icon",[t._v("sentiment_very_dissatisfied")]),t._v(" "),a("span",[t._v("NO RESULTS, LOCATION NOT FOUND...")])],1):t._e()]),t._v(" "),t._m(0)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"errorMessage"},[e("p",[this._v("You can also use the search option ! ")])])}]};var T=a("VU/8")({name:"ErrorPage",data:function(){return{errorType:""}},mounted:function(){this.errorType=this.$route.params.type}},k,!1,function(t){a("ZuN+")},"data-v-3d5d1689",null).exports;n.a.use(h.a);var E=new h.a({routes:[{path:"/",name:"HelloWorld",component:y},{path:"/error/:type*",name:"error",component:T}]}),b=a("3EgV"),O=a.n(b);a("7zck");n.a.use(O.a),n.a.use(r.a),n.a.config.productionTip=!1,a("keRe"),new n.a({el:"#app",router:E,components:{App:p},template:"<App/>"})},RfEp:function(t,e,a){"use strict";var n=a("yj81"),o=a.n(n),i=a("9njv"),r=a("VU/8")(o.a,i.a,!1,null,null,null);e.default=r.exports},"ZuN+":function(t,e){},keRe:function(t,e){},rAV4:function(t,e){},vyp2:function(t,e){},yj81:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.a1542de95974a70d4418.js.map